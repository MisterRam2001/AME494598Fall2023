<!doctype html>
<html>
<head>
<style>
 li{margin-bottom:20px;}
 img{border: 3px solid black;}
</style>  
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
<script src='asyncReq.js'></script>

<link href="prism.css" rel="stylesheet" />
<script>  
function updateData()
{
  loadURL("./getData", function(data){
    document.getElementById("results").innerHTML = data;
  })
}
function start()
{
  setInterval("updateData()", 300);
}
</script>
</head>
<body onload='start()' data-prismjs-copy-timeout="500">
<script src="prism.js"></script>
<br><br>  
<h1 class="m-3 h1"> Temperature/Humidity</h1>
<div id='results'> </div><br><br>
<h1 class="m-3 h1">Tutorial</h1><br>
<ul>
<li class="lead">Step 1 : Launch an EC2 instance in AWS as shown below. Give a name to the instance, select ubuntu 20.04 as the operating system and storage as 28 GB and launch the instance. </li>
<img src="img/Screenshot_3.png" style="width:85%;height:auto;display:block;margin-left:auto;margin-right:auto;"><br><br>
<img src="img/Screenshot_6.png" style="width:85%;height:auto;display:block;margin-left:auto;margin-right:auto;"><br><br>
<img src="img/Screenshot_7.png" style="width:85%;height:auto;display:block;margin-left:auto;margin-right:auto;"><br><br>
<li class="lead">Step 2 : Connect to the selected instance </li>
<img src="img/Screenshot_9.png" style="width:85%;height:auto;display:block;margin-left:auto;margin-right:auto;"><br><br>
<li class="lead">Step 3 : Run the following command in the terminal to install all the necessary libraries. (Nodejs, MongoDB)</li>
<pre data-src="plugins/toolbar/prism-toolbar.js" data-prismjs-copy="Copy"><code class="language-terminal">$ curl -s https://gist.githubusercontent.com/tejaswigowda/f289e9bff13d152876e8d4b3281142f8/raw/df37df2e16a3166e686357a045751a7c18bbeebe/installNodeMongoUbuntu16.04.sh  | bash</code></pre>
<li class="lead">Step 4 : Check the nodejs version, if the version is 10.0 then run the following commands to update to verision 20.0 </li>
<pre data-src="plugins/toolbar/prism-toolbar.js" data-prismjs-copy="Copy"><code class="language-terminal">$ npm install -g n
$ n latest  
</code></pre>
<li class="lead">Step 5 : Clone the gihub repository using the following command </li>
<pre data-src="plugins/toolbar/prism-toolbar.js" data-prismjs-copy="Copy"><code class="language-terminal">$ git clone https://github.com/tejaswigowda/ame498-598Fall2023.git</code></pre>
<li class="lead">Step 6 : Move into the directory : ~/ame498-598Fall2023/watchSensors/captureDataServer-TempHum by using the command "cd {folder_name}" </li>
<li class="lead">Step 7 : Before running the node server, the firewall must be configured. Go to the instances EC2, select Security in the tab below, select the launch wizard and edit inbound rules.</li>
<img src="img/Screenshot_10.png" style="width:85%;height:auto;display:block;margin-left:auto;margin-right:auto;">
<br><br>
<img src="img/Screenshot_11.png" style="width:85%;height:auto;display:block;margin-left:auto;margin-right:auto;">
<br><br>
<li class="lead">Step 8 : Add the inbound rules as shown below {your_ip_address}:{port}, you can check the IP address in the list of running instances in EC2. </li>
<img src="img/Screenshot_1.png" style="width:85%;height:auto;display:block;margin-left:auto;margin-right:auto;">
<br><br>
<li class="lead">Step 9 : Run the Node sever by running the following command shown below, if the PC is connected on ASU network it is recomended to run portmap to reroute the ports . If it is a home internet it is fine to use the same port. I have used the port 1234. </li>
<pre data-src="plugins/toolbar/prism-toolbar.js" data-prismjs-copy="Copy"><code class="language-terminal">$ chmod +x portmap.sh
$ ./portmap.sh
$ Node server.js</code></pre><br><br>
<img src="img/Screenshot_4.png" style="width:85%;height:auto;display:block;margin-left:auto;margin-right:auto;">
<br><br>
<li class="lead">Step 6 : Connect the DH11 sesnor, modify the ssid, password and IP address to the address of the AWS server. Finally upload the code to TTGO-T watch </li>
<img src="img/Screenshot_5.png" style="width:85%;height:auto;display:block;margin-left:auto;margin-right:auto;"><br><br>
<img src="img/20231003_130218.jpg" style="width:40%;height:auto;display:block;margin-left:auto;margin-right:auto;">
<br><br>
<h1 clas="h1">Final Result</h1><br>
<img src="img/Screenshot_8.png" style="width:85%;height:auto;display:block;margin-left:auto;margin-right:auto;">
</ul>

</body>
</html>
